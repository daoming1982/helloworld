<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Codex Google Gemini Chat + æ—¥è¯­ç¿»è¯‘</title>

  <style>
    body {
      max-width: 700px;
      margin: 40px auto;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 15px;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 34px;
      font-weight: 800;
    }
    textarea, button, select {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ddd;
      box-sizing: border-box;
    }
    button {
      background: #222;
      color: white;
      margin-top: 12px;
      cursor: pointer;
      font-weight: bold;
      border: none;
    }
    button:hover {
      background: #000;
    }
    #responseBox {
      margin-top: 20px;
      padding: 15px;
      background: #f7f7f7;
      border-radius: 10px;
      border: 1px solid #e5e5e5;
      white-space: pre-wrap;
    }
  </style>
</head>

<body>

<h1>Google Gemini Chat</h1>

<select id="model">
  <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
  <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash Lite</option>
  <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
</select>


<textarea id="inputBox" placeholder="è¾“å…¥å†…å®¹..."></textarea>

<button onclick="send()">å‘é€</button>
<button onclick="translateToJP()">ç¿»è¯‘ä¸ºæ—¥è¯­ ğŸ‡¯ğŸ‡µ</button>

<div id="responseBox">å›å¤å†…å®¹ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>

<script>
const API = "https://api.codex.love/";

/* -------------------------
    1) Gemini èŠå¤©åŠŸèƒ½
--------------------------*/
async function send() {
  const text = document.getElementById("inputBox").value.trim();
  const model = document.getElementById("model").value;
  const box = document.getElementById("responseBox");

  if (!text) return alert("è¯·è¾“å…¥å†…å®¹ï¼");

  box.textContent = "â³ Gemini æ­£åœ¨æ€è€ƒ...";

  try {
    const resp = await fetch(API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        type: "chat",
        model: model,
        message: text
      })
    });

    const data = await resp.json();
    const reply = data?.reply?.candidates?.[0]?.content?.parts?.[0]?.text;

    box.textContent = reply || JSON.stringify(data, null, 2);

  } catch (err) {
    box.textContent = "âŒ è¯·æ±‚å¤±è´¥ï¼š\n" + err.message;
  }
}


/* -------------------------
    2) æ—¥è¯­ç¿»è¯‘åŠŸèƒ½
--------------------------*/
async function translateToJP() {
  const text = document.getElementById("inputBox").value.trim();
  const model = document.getElementById("model").value;
  const box = document.getElementById("responseBox");

  if (!text) return alert("è¯·è¾“å…¥å†…å®¹ï¼");

  box.textContent = "â³ Gemini æ­£åœ¨ç¿»è¯‘ï¼ˆæ—¥è¯­ + ç‰‡å‡å + ç½—é©¬éŸ³ï¼‰...";

  try {
    const prom = `
è¯·æŠŠä¸‹é¢çš„ä¸­æ–‡ç¿»è¯‘æˆè‡ªç„¶çš„æ—¥è¯­ï¼Œå¹¶è¡¥å……ï¼š
1ï¼‰æ—¥è¯­åŸæ–‡  
2ï¼‰ç‰‡å‡å  
3ï¼‰ç½—é©¬éŸ³  

æ ¼å¼å¦‚ä¸‹ï¼ˆä¸è¦åŠ è§£é‡Šï¼‰ï¼š

æ—¥è¯­ï¼š...
ç‰‡å‡åï¼š...
ç½—é©¬éŸ³ï¼š...

åŸæ–‡ï¼š${text}
`;

    const resp = await fetch(API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        type: "chat",
        model: model,
        message: prom
      })
    });

    const data = await resp.json();
    const reply = data?.reply?.candidates?.[0]?.content?.parts?.[0]?.text;

    box.textContent = reply || JSON.stringify(data, null, 2);

  } catch (err) {
    box.textContent = "âŒ ç¿»è¯‘å¤±è´¥ï¼š\n" + err.message;
  }
}
</script>

</body>
</html>
